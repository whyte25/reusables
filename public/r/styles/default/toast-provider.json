{
  "name": "toast-provider",
  "type": "registry:ui",
  "dependencies": [
    "framer-motion"
  ],
  "registryDependencies": [
    "toast"
  ],
  "files": [
    {
      "path": "reusables/toast/toast-provider.tsx",
      "content": "\"use client\";\n\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\n\nimport { createContext, useContext } from \"react\";\nimport { Toast } from \"./toast\";\n\nlet toastId = 0;\nconst generateId = () => String(toastId++);\n\ninterface ToastState {\n  dismiss: () => void;\n  id: string;\n  params: ToastParams;\n}\n\nexport interface ToastParams {\n  closable?: boolean;\n  className?: string;\n  description?: React.ReactNode;\n  duration?: number;\n  id?: string;\n  onClose?: () => void;\n  title: string;\n  status?: \"error\" | \"warning\" | \"success\" | \"info\" | \"default\" | \"loading\";\n  loaderVariant?: \"loader-1\" | \"loader-2\" | \"loader-3\";\n}\n\nexport interface ToastContextValue {\n  version: 0.0;\n  push: (params: ToastParams) => string;\n}\n\nconst ToastContext = createContext<ToastContextValue>({\n  version: 0.0,\n  push: () => \"\",\n});\n\nexport function ToastProvider({ children }: { children: React.ReactNode }) {\n  const [toasts, setToasts] = useState<ToastState[]>([]);\n  const toastsRef = useRef<{ [key: string]: NodeJS.Timeout }>({});\n\n  const value: ToastContextValue = useMemo(() => {\n    const push = (params: ToastParams) => {\n      const id = params.id || generateId();\n      const duration = params.duration || 5000;\n\n      const dismiss = () => {\n        setToasts((prev) => prev.filter((t) => t.id !== id));\n        if (toastsRef.current[id]) {\n          clearTimeout(toastsRef.current[id]);\n          delete toastsRef.current[id];\n        }\n      };\n\n      setToasts((prev) => [\n        ...prev.filter((t) => t.id !== id),\n        { dismiss, id, params: { ...params, duration } },\n      ]);\n\n      if (toastsRef.current[id]) {\n        clearTimeout(toastsRef.current[id]);\n      }\n\n      toastsRef.current[id] = setTimeout(dismiss, duration);\n\n      return id;\n    };\n\n    return { version: 0.0, push };\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      Object.values(toastsRef.current).forEach(clearTimeout);\n      toastsRef.current = {};\n    };\n  }, []);\n\n  return (\n    <ToastContext.Provider value={value}>\n      {children}\n      <div className=\"fixed inset-0 pointer-events-none\">\n        <div className=\"absolute bottom-0 right-0 max-w-[420px] w-full\">\n          <div className=\"p-4\">\n            <AnimatePresence initial={false}>\n              {toasts.map(({ dismiss, id, params }) => (\n                <motion.div\n                  key={id}\n                  layout\n                  initial={{ opacity: 0, y: 50, scale: 0.3 }}\n                  animate={{ opacity: 1, y: 0, scale: 1 }}\n                  exit={{\n                    opacity: 0,\n                    scale: 0.5,\n                    transition: { duration: 0.2 },\n                  }}\n                  className=\"mb-4 last:mb-0\"\n                >\n                  <Toast {...params} onClose={dismiss} />\n                </motion.div>\n              ))}\n            </AnimatePresence>\n          </div>\n        </div>\n      </div>\n    </ToastContext.Provider>\n  );\n}\n\nexport function useToast(): ToastContextValue {\n  const context = useContext(ToastContext);\n\n  if (!context) {\n    throw new Error(\"useToast must be used within a ToastProvider\");\n  }\n\n  return context;\n}\n\nexport default { ToastContext };\n",
      "type": "registry:ui",
      "target": ""
    }
  ]
}