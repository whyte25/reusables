{
  "name": "pdf-viewers",
  "type": "registry:component",
  "dependencies": [
    "react-pdf",
    "@wojtekmaj/react-hooks",
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "tabs"
  ],
  "files": [
    {
      "path": "reusables/pdf-viewers/pdf-viewer-tabs.tsx",
      "content": "\"use client\";\n\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { CompactViewer } from \"./compact-viewer\";\nimport { FullscreenViewer } from \"./fullscreen-viewer\";\nimport { HoverNavigationViewer } from \"./hover-navigation-viewr\";\nimport { MinimalViewer } from \"./minimal-viewer\";\nimport { SidebarViewer } from \"./sidebar-viewer\";\nimport { ThumbnailViewer } from \"./thumbnail-viewer\";\n\nconst PDFViewerTabs = ({ url }: { url: string }) => {\n  const samplePdfUrl =\n    \"https://raw.githubusercontent.com/mozilla/pdf.js/ba2edeae/web/compressed.tracemonkey-pldi-09.pdf\";\n\n  return (\n    <div className=\"w-full max-w-7xl mx-auto p-4 overflow-hidden\">\n      <Tabs defaultValue=\"hover\" className=\"w-full\">\n        <TabsList className=\"grid grid-cols-3 lg:grid-cols-6 w-full mb-4\">\n          <TabsTrigger value=\"hover\">Hover Nav</TabsTrigger>\n          <TabsTrigger value=\"minimal\">Minimal</TabsTrigger>\n          <TabsTrigger value=\"fullscreen\">Fullscreen</TabsTrigger>\n          <TabsTrigger value=\"thumbnail\">Thumbnails</TabsTrigger>\n          <TabsTrigger value=\"sidebar\">Sidebar</TabsTrigger>\n          <TabsTrigger value=\"compact\">Compact</TabsTrigger>\n        </TabsList>\n\n        <div className=\"relative w-full mt-10 overflow-hidden rounded-lg\">\n          <TabsContent value=\"hover\">\n            <HoverNavigationViewer url={samplePdfUrl} />\n          </TabsContent>\n\n          <TabsContent value=\"minimal\">\n            <MinimalViewer url={samplePdfUrl} />\n          </TabsContent>\n\n          <TabsContent value=\"fullscreen\">\n            <FullscreenViewer\n              url={samplePdfUrl}\n              onClose={() => {\n                const hoverTab = document.querySelector(\n                  '[value=\"hover\"]'\n                ) as HTMLButtonElement;\n                if (hoverTab) hoverTab.click();\n              }}\n            />\n          </TabsContent>\n\n          <TabsContent value=\"thumbnail\">\n            <ThumbnailViewer url={samplePdfUrl} />\n          </TabsContent>\n\n          <TabsContent value=\"sidebar\">\n            <SidebarViewer url={samplePdfUrl} />\n          </TabsContent>\n\n          <TabsContent value=\"compact\">\n            <CompactViewer url={samplePdfUrl} />\n          </TabsContent>\n        </div>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default PDFViewerTabs;\n",
      "type": "registry:component"
    },
    {
      "path": "reusables/pdf-viewers/compact-viewer.tsx",
      "content": "\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { useResizeObserver } from \"@wojtekmaj/react-hooks\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { useCallback, useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport { LoadingSpinner } from \"./loading-spinner\";\n\npdfjs.GlobalWorkerOptions.workerSrc = new URL(\n  \"pdfjs-dist/build/pdf.worker.min.mjs\",\n  import.meta.url\n).toString();\n\nconst resizeObserverOptions = {};\nconst maxWidth = 800;\n\ninterface CompactViewerProps {\n  url: string;\n}\n\nexport const CompactViewer = ({ url }: CompactViewerProps) => {\n  const [numPages, setNumPages] = useState<number | null>(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [containerRef, setContainerRef] = useState<HTMLElement | null>(null);\n  const [containerWidth, setContainerWidth] = useState<number>();\n  const [pageHeight, setPageHeight] = useState<number>(0);\n\n  const onResize = useCallback<ResizeObserverCallback>((entries) => {\n    const [entry] = entries;\n    if (entry) {\n      setContainerWidth(entry.contentRect.width);\n    }\n  }, []);\n\n  useResizeObserver(containerRef, resizeObserverOptions, onResize);\n\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setNumPages(numPages);\n  };\n\n  const changePage = (offset: number) => {\n    setPageNumber((prevPageNumber) => {\n      const newPageNumber = prevPageNumber + offset;\n      return numPages\n        ? Math.min(Math.max(1, newPageNumber), numPages)\n        : prevPageNumber;\n    });\n  };\n\n  // Calculate page width based on container\n  const pageWidth = containerWidth\n    ? Math.min(containerWidth - 48, maxWidth)\n    : maxWidth;\n\n  return (\n    <div\n      className=\"w-full max-w-4xl mx-auto bg-background/50 backdrop-blur-sm rounded-xl p-6 shadow-lg\"\n      ref={setContainerRef}\n    >\n      <div className=\"flex flex-col gap-6\">\n        {/* PDF Viewer */}\n        <div className=\"flex justify-center\" style={{ minHeight: pageHeight }}>\n          <Document\n            file={url}\n            onLoadSuccess={onDocumentLoadSuccess}\n            loading={<LoadingSpinner />}\n            className={cn(\n              \"flex flex-col items-center\",\n              \"[&_.react-pdf__Page]:my-0\",\n              \"[&_.react-pdf__Page__canvas]:max-w-full\",\n              \"[&_.react-pdf__Page__canvas]:h-auto\",\n              \"dark:[&_.react-pdf__Page]:invert dark:[&_.react-pdf__Page]:brightness-90\"\n            )}\n          >\n            <Page\n              pageNumber={pageNumber}\n              renderTextLayer={true}\n              renderAnnotationLayer={true}\n              className=\"shadow-xl rounded-xl overflow-hidden ring-1 ring-black/5 dark:ring-white/10\"\n              width={pageWidth}\n              loading={\n                <LoadingSpinner\n                  minHeight={pageHeight ? `${pageHeight}px` : \"600px\"}\n                  spinnerClassName=\"dark:text-black\"\n                />\n              }\n              onLoadSuccess={(page) => {\n                setPageHeight(page.height * (pageWidth / page.width));\n              }}\n            />\n          </Document>\n        </div>\n\n        {/* Navigation Controls */}\n        <div className=\"flex items-center justify-center gap-3 py-2\">\n          <div className=\"flex items-center gap-2 bg-background/80 backdrop-blur-sm px-4 py-2 rounded-full shadow-sm ring-1 ring-black/5 dark:ring-white/10\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={() => changePage(-1)}\n              disabled={pageNumber <= 1}\n              className=\"h-8 w-8 rounded-full hover:bg-accent\"\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n\n            <div className=\"flex items-center gap-1.5 min-w-[90px] justify-center\">\n              <span className=\"text-sm font-medium text-foreground\">\n                {pageNumber}\n              </span>\n              <span className=\"text-sm text-muted-foreground\">/</span>\n              <span className=\"text-sm text-muted-foreground\">\n                {numPages || \"-\"}\n              </span>\n            </div>\n\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={() => changePage(1)}\n              disabled={pageNumber >= (numPages || 1)}\n              className=\"h-8 w-8 rounded-full hover:bg-accent\"\n            >\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n",
      "type": "registry:component"
    },
    {
      "path": "reusables/pdf-viewers/fullscreen-viewer.tsx",
      "content": "\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { ChevronLeft, ChevronRight, Download } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport { LoadingSpinner } from \"./loading-spinner\";\n\npdfjs.GlobalWorkerOptions.workerSrc = new URL(\n  \"pdfjs-dist/build/pdf.worker.min.mjs\",\n  import.meta.url\n).toString();\n\ninterface FullscreenViewerProps {\n  url: string;\n  onClose?: () => void;\n}\nconst maxWidth = 800;\n\nexport const FullscreenViewer = ({ url, onClose }: FullscreenViewerProps) => {\n  const [numPages, setNumPages] = useState<number | null>(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [scale, setScale] = useState(1);\n  const [containerRef, setContainerRef] = useState<HTMLElement | null>(null);\n  const [containerWidth, setContainerWidth] = useState<number>();\n  const [pageHeight, setPageHeight] = useState<number>(0);\n\n  useEffect(() => {\n    const isMobile = window.innerWidth < 768;\n    setScale(isMobile ? 0.5 : 1);\n  }, []);\n\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setNumPages(numPages);\n  };\n\n  const pageWidth = containerWidth\n    ? Math.min(containerWidth - 48, maxWidth)\n    : maxWidth;\n\n  return (\n    <div className=\"fixed inset-0 bg-gray-100 dark:bg-gray-900 z-50 overflow-auto\">\n      <div className=\"sticky top-0 z-10 bg-white dark:bg-gray-600 border-b shadow-sm\">\n        <div className=\"w-full max-w-[1400px] mx-auto px-4 py-2\">\n          <div\n            className={cn(\n              \"flex flex-col md:flex-row md:items-center justify-between gap-4\"\n            )}\n          >\n            {/* Navigation Controls */}\n            <div className={cn(\"flex items-center gap-2\", \"mx-auto md:mx-0\")}>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={() => setPageNumber((p) => Math.max(1, p - 1))}\n                disabled={pageNumber <= 1}\n                className=\"dark:bg-white/10 dark:backdrop-blur-sm dark:hover:bg-white/20 dark:border-white/10\"\n              >\n                <ChevronLeft className=\"h-4 w-4\" />\n              </Button>\n\n              <span className=\"text-sm font-medium min-w-[80px] text-center\">\n                Page {pageNumber} of {numPages || \"-\"}\n              </span>\n\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={() =>\n                  setPageNumber((p) => Math.min(numPages || p, p + 1))\n                }\n                disabled={pageNumber >= (numPages || 1)}\n                className=\"dark:bg-white/10 dark:backdrop-blur-sm dark:hover:bg-white/20 dark:border-white/10\"\n              >\n                <ChevronRight className=\"h-4 w-4\" />\n              </Button>\n            </div>\n\n            <div className={cn(\"flex items-center gap-2\", \"mx-auto md:mx-0\")}>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setScale((s) => Math.max(0.5, s - 0.1))}\n                className=\"text-sm whitespace-nowrap dark:bg-white/10 dark:text-white hover:opacity-90 dark:backdrop-blur-sm dark:hover:bg-white/20 dark:border-white/10 rounded-full\"\n                disabled={scale <= 0.5}\n              >\n                Zoom Out\n              </Button>\n              <span className=\"text-sm font-medium min-w-[60px] text-center\">\n                {Math.round(scale * 100)}%\n              </span>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setScale((s) => Math.min(2, s + 0.1))}\n                className=\"text-sm whitespace-nowrap dark:bg-white/10 dark:text-white hover:opacity-90 dark:backdrop-blur-sm dark:hover:bg-white/20 dark:border-white/10 rounded-full\"\n                disabled={scale >= 2}\n              >\n                Zoom In\n              </Button>\n\n              {/* Download Button */}\n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                onClick={() => window.open(url, \"_blank\")}\n                className={cn(\n                  \"ml-2 h-8 w-8 rounded-full\",\n                  \"dark:bg-white/10 dark:text-white hover:opacity-90\",\n                  \"dark:backdrop-blur-sm dark:hover:bg-white/20 dark:border-white/10\",\n                  \"transition-all duration-200 ease-in-out\"\n                )}\n                title=\"Download PDF\"\n              >\n                <Download className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex justify-center p-4 md:p-8\" ref={setContainerRef}>\n        <div className=\"flex justify-center\" style={{ minHeight: pageHeight }}>\n          <Document\n            file={url}\n            onLoadSuccess={onDocumentLoadSuccess}\n            loading={<LoadingSpinner />}\n            className={cn(\n              \"flex flex-col items-center\",\n              \"[&_.react-pdf__Page]:my-0\",\n              \"[&_.react-pdf__Page__canvas]:max-w-full\",\n              \"[&_.react-pdf__Page__canvas]:h-auto\"\n            )}\n          >\n            <Page\n              pageNumber={pageNumber}\n              renderTextLayer={true}\n              renderAnnotationLayer={true}\n              className=\"shadow-xl rounded-lg\"\n              width={pageWidth * scale}\n              loading={\n                <LoadingSpinner\n                  minHeight={pageHeight ? `${pageHeight}px` : \"600px\"}\n                  spinnerClassName=\"dark:text-black\"\n                />\n              }\n              onLoadSuccess={(page) => {\n                setPageHeight(page.height * (pageWidth / page.width) * scale);\n              }}\n            />\n          </Document>\n        </div>\n      </div>\n    </div>\n  );\n};\n",
      "type": "registry:component"
    },
    {
      "path": "reusables/pdf-viewers/hover-navigation-viewer.tsx",
      "content": "\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { useResizeObserver } from \"@wojtekmaj/react-hooks\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { useCallback, useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport { LoadingSpinner } from \"./loading-spinner\";\n\npdfjs.GlobalWorkerOptions.workerSrc = new URL(\n  \"pdfjs-dist/build/pdf.worker.min.mjs\",\n  import.meta.url\n).toString();\n\nconst resizeObserverOptions = {};\nconst maxWidth = 800;\n\ninterface HoverNavigationViewerProps {\n  url: string;\n}\n\nexport const HoverNavigationViewer = ({ url }: HoverNavigationViewerProps) => {\n  const [numPages, setNumPages] = useState<number | null>(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [isHovering, setIsHovering] = useState(false);\n  const [containerRef, setContainerRef] = useState<HTMLElement | null>(null);\n  const [containerWidth, setContainerWidth] = useState<number>();\n  const [pageHeight, setPageHeight] = useState<number>(0);\n\n  const onResize = useCallback<ResizeObserverCallback>((entries) => {\n    const [entry] = entries;\n    if (entry) {\n      setContainerWidth(entry.contentRect.width);\n    }\n  }, []);\n\n  useResizeObserver(containerRef, resizeObserverOptions, onResize);\n\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setNumPages(numPages);\n  };\n\n  const changePage = (offset: number) => {\n    setPageNumber((prevPageNumber) => {\n      const newPageNumber = prevPageNumber + offset;\n      return numPages\n        ? Math.min(Math.max(1, newPageNumber), numPages)\n        : prevPageNumber;\n    });\n  };\n\n  const pageWidth = containerWidth\n    ? Math.min(containerWidth, maxWidth)\n    : maxWidth;\n\n  return (\n    <div\n      className=\"relative w-full max-w-4xl mx-auto\"\n      onMouseEnter={() => setIsHovering(true)}\n      onMouseLeave={() => setIsHovering(false)}\n      ref={setContainerRef}\n    >\n      <div className=\"flex justify-center\" style={{ minHeight: pageHeight }}>\n        <Document\n          file={url}\n          onLoadSuccess={onDocumentLoadSuccess}\n          loading={<LoadingSpinner />}\n          className=\"flex justify-center\"\n        >\n          <Page\n            pageNumber={pageNumber}\n            renderTextLayer={true}\n            renderAnnotationLayer={true}\n            className=\"shadow-lg rounded-lg\"\n            width={pageWidth}\n            loading={\n              <LoadingSpinner\n                minHeight={pageHeight ? `${pageHeight}px` : \"600px\"}\n                spinnerClassName=\"dark:text-black\"\n              />\n            }\n            onLoadSuccess={(page) => {\n              setPageHeight(page.height * (pageWidth / page.width));\n            }}\n          />\n        </Document>\n      </div>\n\n      {numPages && numPages > 1 && isHovering && (\n        <>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => changePage(-1)}\n            disabled={pageNumber <= 1}\n            className={cn(\n              \"absolute left-4 top-1/2 -translate-y-1/2 rounded-full\",\n              \"bg-white/90 dark:bg-white dark:text-black hover:bg-white dark:hover:bg-white transition-all duration-200  shadow-lg\"\n            )}\n          >\n            <ChevronLeft className=\"h-4 w-4\" />\n          </Button>\n\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => changePage(1)}\n            disabled={pageNumber >= (numPages || 1)}\n            className={cn(\n              \"absolute right-4 top-1/2 -translate-y-1/2 rounded-full\",\n              \"bg-white/90 dark:bg-white dark:text-black hover:bg-white dark:hover:bg-white transition-all duration-200  shadow-lg\"\n            )}\n          >\n            <ChevronRight className=\"h-4 w-4\" />\n          </Button>\n\n          <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white/90 px-4 py-2 rounded-full text-sm font-medium shadow-lg\">\n            Page {pageNumber} of {numPages}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n",
      "type": "registry:component"
    },
    {
      "path": "reusables/pdf-viewers/minimal-viewer.tsx",
      "content": "\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { useResizeObserver } from \"@wojtekmaj/react-hooks\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport React, { useCallback, useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport \"react-pdf/dist/esm/Page/AnnotationLayer.css\";\nimport \"react-pdf/dist/esm/Page/TextLayer.css\";\nimport \"react-pdf/dist/Page/TextLayer.css\";\nimport { LoadingSpinner } from \"./loading-spinner\";\n\n// Important: Set worker source\npdfjs.GlobalWorkerOptions.workerSrc = new URL(\n  \"pdfjs-dist/build/pdf.worker.min.mjs\",\n  import.meta.url\n).toString();\n\nconst resizeObserverOptions = {};\nconst maxWidth = 800;\n\ninterface MinimalViewerProps {\n  url: string;\n}\n\nexport const MinimalViewer = ({ url }: MinimalViewerProps) => {\n  const [numPages, setNumPages] = useState<number | null>(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [containerRef, setContainerRef] = useState<HTMLElement | null>(null);\n  const [containerWidth, setContainerWidth] = useState<number>();\n  const [pageHeight, setPageHeight] = useState<number>(0);\n\n  const onResize = useCallback<ResizeObserverCallback>((entries) => {\n    const [entry] = entries;\n    if (entry) {\n      setContainerWidth(entry.contentRect.width);\n    }\n  }, []);\n\n  useResizeObserver(containerRef, resizeObserverOptions, onResize);\n\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setNumPages(numPages);\n  };\n\n  const changePage = (offset: number) => {\n    setPageNumber((prevPageNumber) => {\n      const newPageNumber = prevPageNumber + offset;\n      return numPages\n        ? Math.min(Math.max(1, newPageNumber), numPages)\n        : prevPageNumber;\n    });\n  };\n\n  const previousPage = () => changePage(-1);\n  const nextPage = () => changePage(1);\n\n  // Keyboard navigation\n  React.useEffect(() => {\n    const handleKeyPress = (event: KeyboardEvent) => {\n      if (event.key === \"ArrowLeft\") {\n        previousPage();\n      } else if (event.key === \"ArrowRight\") {\n        nextPage();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyPress);\n    return () => window.removeEventListener(\"keydown\", handleKeyPress);\n  }, []);\n\n  const pageWidth = containerWidth\n    ? Math.min(containerWidth - 48, maxWidth)\n    : maxWidth;\n\n  return (\n    <div className=\"w-full max-w-4xl mx-auto\" ref={setContainerRef}>\n      <div className=\"flex flex-col gap-4 w-full\">\n        <div className=\"flex justify-center\" style={{ minHeight: pageHeight }}>\n          <Document\n            file={url}\n            onLoadSuccess={onDocumentLoadSuccess}\n            loading={<LoadingSpinner />}\n            className={cn(\n              \"flex flex-col gap-2 md:gap-4 w-full items-center\",\n              \"[&_.react-pdf__message]:p-5\",\n              \"[&_.react-pdf__message]:text-white\",\n              \"[&_.react-pdf__Page]:my-0\"\n            )}\n          >\n            <Page\n              pageNumber={pageNumber}\n              renderTextLayer={true}\n              renderAnnotationLayer={true}\n              className=\"shadow-lg rounded-lg\"\n              width={pageWidth}\n              loading={\n                <LoadingSpinner\n                  minHeight={pageHeight ? `${pageHeight}px` : \"600px\"}\n                  spinnerClassName=\"dark:text-black\"\n                />\n              }\n              onLoadSuccess={(page) => {\n                setPageHeight(page.height * (pageWidth / page.width));\n              }}\n            />\n          </Document>\n        </div>\n\n        <div\n          className={cn(\n            \"flex items-center justify-center mx-auto w-11/12 gap-4 mt-4 p-2\",\n            \"bg-white/80 dark:bg-black/80 backdrop-blur rounded-full shadow-sm\"\n          )}\n        >\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={previousPage}\n            disabled={pageNumber <= 1}\n            className=\"rounded-full\"\n          >\n            <ChevronLeft className=\"h-4 w-4\" />\n          </Button>\n\n          <div className=\"text-sm font-medium\">\n            {pageNumber} / {numPages || \"-\"}\n          </div>\n\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={nextPage}\n            disabled={numPages !== null && pageNumber >= numPages}\n            className=\"rounded-full\"\n          >\n            <ChevronRight className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MinimalViewer;\n",
      "type": "registry:component"
    },
    {
      "path": "reusables/pdf-viewers/sidebar-viewer.tsx",
      "content": "\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport useScreenSize from \"@/hooks/use-screen-size\";\nimport { cn } from \"@/lib/utils\";\nimport { useResizeObserver } from \"@wojtekmaj/react-hooks\";\nimport { ChevronLeft, ChevronRight, List, X } from \"lucide-react\";\nimport { useCallback, useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport { LoadingSpinner } from \"./loading-spinner\";\n\npdfjs.GlobalWorkerOptions.workerSrc = new URL(\n  \"pdfjs-dist/build/pdf.worker.min.mjs\",\n  import.meta.url\n).toString();\n\nconst resizeObserverOptions = {};\nconst maxWidth = 800;\n\ninterface SidebarViewerProps {\n  url: string;\n}\n\nexport const SidebarViewer = ({ url }: SidebarViewerProps) => {\n  const [numPages, setNumPages] = useState<number | null>(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [showSidebar, setShowSidebar] = useState(false);\n  const [containerRef, setContainerRef] = useState<HTMLElement | null>(null);\n  const [containerWidth, setContainerWidth] = useState<number>();\n  const [pageHeight, setPageHeight] = useState<number>(0);\n  const { isMobile } = useScreenSize();\n\n  const onResize = useCallback<ResizeObserverCallback>((entries) => {\n    const [entry] = entries;\n    if (entry) {\n      setContainerWidth(entry.contentRect.width);\n    }\n  }, []);\n\n  useResizeObserver(containerRef, resizeObserverOptions, onResize);\n\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setNumPages(numPages);\n  };\n\n  // Update the width calculation to consider sidebar visibility\n  const pageWidth = containerWidth\n    ? Math.min(containerWidth - (showSidebar ? 256 + 16 : 0), maxWidth)\n    : maxWidth;\n\n  return (\n    <div\n      className={cn(\n        \"relative flex min-h-[600px] w-full max-w-6xl mx-auto\",\n        \"bg-background rounded-lg shadow-lg overflow-hidden\",\n        showSidebar ? \"gap-4\" : \"gap-0\"\n      )}\n      ref={setContainerRef}\n    >\n      {/* Mobile Overlay */}\n      {showSidebar && (\n        <div\n          className=\"md:hidden fixed inset-0 bg-black/20 dark:bg-black/50 z-40\"\n          onClick={() => setShowSidebar(false)}\n        />\n      )}\n\n      {/* Sidebar */}\n      <div\n        className={cn(\n          \"fixed md:relative inset-y-0 left-0 w-64 bg-secondary/30 border-r z-50\",\n          \"transform transition-transform duration-300 ease-in-out\",\n          showSidebar ? \"translate-x-0\" : \"-translate-x-full\",\n          !showSidebar && \"md:-translate-x-full hidden\"\n        )}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b backdrop-blur-sm\">\n          <h2 className=\"font-medium text-foreground\">Table of Contents</h2>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setShowSidebar(false)}\n            className=\"md:hidden\"\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n\n        <ScrollArea className=\"h-[calc(100%-60px)]\">\n          <div className=\"p-4\">\n            {Array.from(new Array(numPages), (_, index) => (\n              <button\n                key={index}\n                onClick={() => {\n                  setPageNumber(index + 1);\n                  if (isMobile) {\n                    setShowSidebar(false);\n                  }\n                }}\n                className={cn(\n                  \"w-full text-left px-4 py-2 rounded-lg transition-colors\",\n                  pageNumber === index + 1\n                    ? \"bg-primary text-primary-foreground\"\n                    : \"hover:bg-secondary/50\"\n                )}\n              >\n                Page {index + 1}\n              </button>\n            ))}\n          </div>\n        </ScrollArea>\n      </div>\n\n      {/* Main Content */}\n      <div\n        className={cn(\n          \"flex-1 min-w-0 p-4 transition-all  duration-300\",\n          !showSidebar && \"md:pl-4\"\n        )}\n      >\n        <div className=\"flex items-center justify-between mb-4\">\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => {\n              setShowSidebar((prev) => !prev);\n            }}\n            className={cn(\"h-8 w-8\")}\n          >\n            <List className=\"h-4 w-4\" />\n          </Button>\n\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={() => setPageNumber((p) => Math.max(1, p - 1))}\n              disabled={pageNumber <= 1}\n              className=\"h-8 w-8\"\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n\n            <span className=\"text-sm font-medium min-w-[80px] text-center\">\n              {pageNumber} / {numPages || \"-\"}\n            </span>\n\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={() =>\n                setPageNumber((p) => Math.min(numPages || p, p + 1))\n              }\n              disabled={pageNumber >= (numPages || 1)}\n              className=\"h-8 w-8\"\n            >\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"flex justify-center\" style={{ minHeight: pageHeight }}>\n          <Document\n            file={url}\n            onLoadSuccess={onDocumentLoadSuccess}\n            loading={<LoadingSpinner />}\n            className={cn(\n              \"flex justify-center\",\n              \"[&_.react-pdf__Page]:my-0\",\n              \"dark:[&_.react-pdf__Page]:invert dark:[&_.react-pdf__Page]:brightness-90\"\n            )}\n          >\n            <Page\n              pageNumber={pageNumber}\n              renderTextLayer={true}\n              renderAnnotationLayer={true}\n              className=\"shadow-sm rounded-lg\"\n              width={pageWidth}\n              loading={\n                <LoadingSpinner\n                  minHeight={pageHeight ? `${pageHeight}px` : \"600px\"}\n                  spinnerClassName=\"dark:text-black\"\n                />\n              }\n              onLoadSuccess={(page) => {\n                setPageHeight(page.height * (pageWidth / page.width));\n              }}\n            />\n          </Document>\n        </div>\n      </div>\n    </div>\n  );\n};\n",
      "type": "registry:component"
    },
    {
      "path": "reusables/pdf-viewers/thumbnail-viewer.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { useResizeObserver } from \"@wojtekmaj/react-hooks\";\nimport { useCallback, useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport { LoadingSpinner } from \"./loading-spinner\";\n\npdfjs.GlobalWorkerOptions.workerSrc = new URL(\n  \"pdfjs-dist/build/pdf.worker.min.mjs\",\n  import.meta.url\n).toString();\n\nconst resizeObserverOptions = {};\nconst maxWidth = 800;\nconst thumbnailScale = 0.2; // Scale for thumbnails\n\ninterface ThumbnailViewerProps {\n  url: string;\n}\n\nexport const ThumbnailViewer = ({ url }: ThumbnailViewerProps) => {\n  const [numPages, setNumPages] = useState<number | null>(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [containerRef, setContainerRef] = useState<HTMLElement | null>(null);\n  const [containerWidth, setContainerWidth] = useState<number>();\n  const [pageNumber, setPageNumber] = useState(1);\n  const [pageWidth, setPageWidth] = useState(800);\n  const [pageHeight, setPageHeight] = useState(0);\n\n  const onResize = useCallback<ResizeObserverCallback>((entries) => {\n    const [entry] = entries;\n    if (entry) {\n      setContainerWidth(entry.contentRect.width);\n    }\n  }, []);\n\n  useResizeObserver(containerRef, resizeObserverOptions, onResize);\n\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setNumPages(numPages);\n  };\n\n  // Calculate main viewer width based on container width\n  const mainViewerWidth = containerWidth\n    ? Math.min(containerWidth - 120, maxWidth) // 120px for thumbnail column + gap\n    : maxWidth;\n\n  // Calculate thumbnail width\n  const thumbnailWidth = Math.min(96, mainViewerWidth * thumbnailScale);\n\n  return (\n    <div className=\"w-full max-w-6xl mx-auto\" ref={setContainerRef}>\n      <div className=\"flex flex-col md:flex-row gap-4\">\n        {/* Thumbnails */}\n        <div\n          className={cn(\n            \"flex md:flex-col gap-2 p-4 overflow-auto\",\n            \"bg-white/50 backdrop-blur-sm rounded-xl shadow-lg\",\n            \"md:w-48\"\n          )}\n        >\n          {Array.from(new Array(numPages), (_, index) => (\n            <button\n              key={index}\n              onClick={() => setPageNumber(index + 1)}\n              className={cn(\n                \"relative rounded-lg overflow-hidden transition-all\",\n                \"hover:ring-2 hover:ring-primary/50\",\n                pageNumber === index + 1 && \"ring-2 ring-primary\"\n              )}\n            >\n              <Document file={url}>\n                <Page\n                  pageNumber={index + 1}\n                  width={150}\n                  renderTextLayer={false}\n                  renderAnnotationLayer={false}\n                  loading={<LoadingSpinner minHeight=\"100px\" />}\n                />\n              </Document>\n            </button>\n          ))}\n        </div>\n\n        {/* Main Viewer */}\n        <div className=\"flex-1 min-w-0\">\n          <div\n            className=\"flex justify-center\"\n            style={{ minHeight: pageHeight }}\n          >\n            <Document\n              file={url}\n              onLoadSuccess={onDocumentLoadSuccess}\n              loading={<LoadingSpinner />}\n              className={cn(\n                \"flex flex-col items-center\",\n                \"[&_.react-pdf__Page]:my-0\"\n              )}\n            >\n              <Page\n                pageNumber={pageNumber}\n                renderTextLayer={true}\n                renderAnnotationLayer={true}\n                className=\"shadow-xl rounded-lg\"\n                width={pageWidth}\n                loading={\n                  <LoadingSpinner\n                    minHeight={pageHeight ? `${pageHeight}px` : \"600px\"}\n                    spinnerClassName=\"dark:text-black\"\n                  />\n                }\n                onLoadSuccess={(page) => {\n                  setPageHeight(page.height * (pageWidth / page.width));\n                }}\n              />\n            </Document>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n",
      "type": "registry:component"
    },
    {
      "path": "reusables/pdf-viewers/loading-spinner.tsx",
      "content": "import { cn } from \"@/lib/utils\";\nimport { Loader2 } from \"lucide-react\";\n\ninterface LoadingSpinnerProps {\n  minHeight?: string;\n  minWidth?: string;\n  className?: string;\n  spinnerClassName?: string;\n}\n\nexport const LoadingSpinner = ({\n  minHeight = \"600px\",\n  minWidth = \"800px\",\n  className,\n  spinnerClassName,\n}: LoadingSpinnerProps) => {\n  return (\n    <div\n      className={cn(\"flex items-center justify-center\", className)}\n      style={{ minHeight, minWidth }}\n    >\n      <Loader2\n        className={cn(\"w-8 h-8 animate-spin text-primary\", spinnerClassName)}\n      />\n    </div>\n  );\n};\n",
      "type": "registry:component"
    }
  ]
}