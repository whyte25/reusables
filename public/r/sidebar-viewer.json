{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "sidebar-viewer",
  "type": "registry:component",
  "dependencies": ["react-pdf", "@wojtekmaj/react-hooks", "lucide-react"],
  "registryDependencies": ["button", "scroll-area"],
  "files": [
    {
      "path": "registry/default/reusables/pdf-viewers/sidebar-viewer.tsx",
      "content": "\"use client\"\n\nimport { useCallback, useState } from \"react\"\nimport { useResizeObserver } from \"@wojtekmaj/react-hooks\"\nimport { ChevronLeft, ChevronRight, List, X } from \"lucide-react\"\nimport { Document, Page, pdfjs } from \"react-pdf\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport useScreenSize from \"@/registry/default/hooks/use-screen-size\"\n\nimport { LoadingSpinner } from \"./loading-spinner\"\n\npdfjs.GlobalWorkerOptions.workerSrc = new URL(\n  \"pdfjs-dist/build/pdf.worker.min.mjs\",\n  import.meta.url\n).toString()\n\nconst resizeObserverOptions = {}\nconst maxWidth = 800\n\ninterface SidebarViewerProps {\n  url: string\n}\n\nexport const SidebarViewer = ({ url }: SidebarViewerProps) => {\n  const [numPages, setNumPages] = useState<number | null>(null)\n  const [pageNumber, setPageNumber] = useState(1)\n  const [showSidebar, setShowSidebar] = useState(false)\n  const [containerRef, setContainerRef] = useState<HTMLElement | null>(null)\n  const [containerWidth, setContainerWidth] = useState<number>()\n  const [pageHeight, setPageHeight] = useState<number>(0)\n  const { isMobile } = useScreenSize()\n\n  const onResize = useCallback<ResizeObserverCallback>((entries) => {\n    const [entry] = entries\n    if (entry) {\n      setContainerWidth(entry.contentRect.width)\n    }\n  }, [])\n\n  useResizeObserver(containerRef, resizeObserverOptions, onResize)\n\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setNumPages(numPages)\n  }\n\n  const pageWidth =\n    containerWidth ? Math.min(containerWidth - 48, maxWidth) : maxWidth\n\n  return (\n    <div\n      className={cn(\n        \"relative mx-auto min-h-[600px] w-full max-w-6xl\",\n        \"overflow-hidden rounded-lg bg-background shadow-lg\"\n      )}\n      ref={setContainerRef}\n    >\n      {/* Mobile Overlay */}\n      {showSidebar && (\n        <div\n          className=\"absolute inset-0 z-40 bg-black/20 dark:bg-black/50\"\n          onClick={() => setShowSidebar(false)}\n        />\n      )}\n      {/* Sidebar */}\n      <div\n        className={cn(\n          \"absolute left-0 top-0 z-50 h-full w-64 border-r bg-background/95 backdrop-blur-sm\",\n          \"transform transition-transform duration-300 ease-in-out\",\n          showSidebar ? \"translate-x-0\" : \"-translate-x-full\"\n        )}\n      >\n        <div className=\"flex items-center justify-between border-b p-4\">\n          <h2 className=\"not-prose text-base font-medium text-foreground\">\n            Table of Contents\n          </h2>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setShowSidebar(false)}\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n\n        <ScrollArea className=\"h-[calc(100%-60px)]\">\n          <div className=\"p-4\">\n            {Array.from(new Array(numPages), (_, index) => (\n              <button\n                key={index}\n                onClick={() => {\n                  setPageNumber(index + 1)\n                  setShowSidebar(false)\n                }}\n                className={cn(\n                  \"w-full rounded-lg px-4 py-2 text-left transition-colors\",\n                  pageNumber === index + 1 ?\n                    \"bg-primary text-primary-foreground\"\n                  : \"hover:bg-secondary/50\"\n                )}\n              >\n                Page {index + 1}\n              </button>\n            ))}\n          </div>\n        </ScrollArea>\n      </div>{\" \"}\n      {/* Main Content */}\n      <div className=\"w-full p-4\">\n        <div className=\"mb-4 flex items-center justify-between\">\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => setShowSidebar(true)}\n            className=\"h-8 w-8\"\n          >\n            <List className=\"h-4 w-4\" />\n          </Button>\n\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={() => setPageNumber((p) => Math.max(1, p - 1))}\n              disabled={pageNumber <= 1}\n              className=\"h-8 w-8\"\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n\n            <span className=\"min-w-[80px] text-center text-sm font-medium\">\n              {pageNumber} / {numPages || \"-\"}\n            </span>\n\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={() =>\n                setPageNumber((p) => Math.min(numPages || p, p + 1))\n              }\n              disabled={pageNumber >= (numPages || 1)}\n              className=\"h-8 w-8\"\n            >\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"flex justify-center\" style={{ minHeight: pageHeight }}>\n          <Document\n            file={url}\n            onLoadSuccess={onDocumentLoadSuccess}\n            loading={\n              <LoadingSpinner\n                minHeight={pageHeight ? `${pageHeight}px` : \"600px\"}\n                minWidth={pageWidth ? `${pageWidth}px` : \"800px\"}\n                spinnerClassName=\"dark:text-black\"\n              />\n            }\n            className={cn(\n              \"flex justify-center\",\n              \"[&_.react-pdf__Page]:my-0\",\n              \"dark:[&_.react-pdf__Page]:brightness-90 dark:[&_.react-pdf__Page]:invert\"\n            )}\n          >\n            <Page\n              pageNumber={pageNumber}\n              renderTextLayer={true}\n              renderAnnotationLayer={true}\n              className=\"rounded-lg shadow-sm\"\n              width={pageWidth}\n              loading={\n                <LoadingSpinner\n                  minHeight={pageHeight ? `${pageHeight}px` : \"600px\"}\n                  minWidth={pageWidth ? `${pageWidth}px` : \"800px\"}\n                  spinnerClassName=\"dark:text-black\"\n                />\n              }\n              onLoadSuccess={(page) => {\n                setPageHeight(page.height * (pageWidth / page.width))\n              }}\n            />\n          </Document>\n        </div>\n      </div>\n    </div>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/pdf-viewers/sidebar-viewer.tsx"
    },
    {
      "path": "registry/default/reusables/pdf-viewers/loading-spinner.tsx",
      "content": "import { Loader2 } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\ninterface LoadingSpinnerProps {\n  minHeight?: string\n  minWidth?: string\n  className?: string\n  spinnerClassName?: string\n}\n\nexport const LoadingSpinner = ({\n  minHeight = \"600px\",\n  minWidth = \"800px\",\n  className,\n  spinnerClassName,\n}: LoadingSpinnerProps) => {\n  return (\n    <div\n      className={cn(\"flex items-center justify-center\", className)}\n      style={{ minHeight, minWidth }}\n    >\n      <Loader2\n        className={cn(\"h-8 w-8 animate-spin text-white\", spinnerClassName)}\n      />\n    </div>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/pdf-viewers/loading-spinner.tsx"
    }
  ]
}
